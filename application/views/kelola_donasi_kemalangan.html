<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
  <title>Kelola Donasi | Danawira</title>

  <!-- General CSS Files -->
  <link rel="stylesheet" href="assets/modules/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/modules/fontawesome/css/all.min.css">

  <!-- CSS Libraries -->
  <link rel="stylesheet" href="assets/modules/datatables/datatables.min.css">
  <link rel="stylesheet" href="assets/modules/datatables/DataTables-1.10.16/css/dataTables.bootstrap4.min.css">
  <link rel="stylesheet" href="assets/modules/datatables/Select-1.2.4/css/select.bootstrap4.min.css">

  <!-- Template CSS -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/components.css">
<!-- Start GA -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-94034622-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-94034622-3');
</script>
<!-- /END GA --></head>

<body>
  <div id="app">
    <div class="main-wrapper main-wrapper-1">
      <div class="navbar-bg"></div>
      <nav class="navbar navbar-expand-lg main-navbar">
        <<form class="form-inline mr-auto">
          <ul class="navbar-nav mr-3">
            <li><a href="#" data-toggle="sidebar" class="nav-link nav-link-lg"><i class="fas fa-bars"></i></a></li>
          </ul>
          </form>
          <ul class="navbar-nav mr-3">
          <li><a href="#" data-toggle="search" class="nav-link nav-link-lg d-sm"><i class="fa fa-sign-out-alt" style='font-size:23px'></i></a></li>
          </ul>
          <ul class="navbar-nav navbar-right">
          
        </ul>
      </nav>
      <div class="main-sidebar sidebar-style-2">
        <aside id="sidebar-wrapper">
          <div class="sidebar-brand">
            <a href="index.html">Danawira</a>
          </div>
          <div class="sidebar-brand sidebar-brand-sm">
            <a href="index.html">DNW</a>
          </div>
          <ul class="sidebar-menu">
            <li class="menu-header">Menu</li>
            <li><a class="nav-link" href="kelola_donasi_pendidikan.html"><i class="fas fa-school"></i> <span>Pendidikan</span></a></li>
            <li><a class="nav-link" href="kelola_donasi_bencanaAlam.html"><i class="fas fa-house-damage"></i> <span>Bencana Alam</span></a></li>
            <li><a class="nav-link" href="kelola_donasi_sosial.html"><i class="fas fa-users"></i> <span>Sosial</span></a></li>
            <li class="active"><a class="nav-link" href="kelola_donasi_kemalangan.html"><i class="fas fa-dizzy"></i> <span>Kemalangan</span></a></li>
            <li><a class="nav-link" href="kelola_donasi_event.html"><i class="fas fa-microphone"></i> <span>Event</span></a></li>
            <li><a class="nav-link" href="kelola_donasi_lainnya.html"><i class="fas fa-ellipsis-h"></i> <span>Lainnya</span></a></li>
            
            <li class="menu-header">Data Master</li>
            <li><a class="nav-link" href="kelola_pengumuman.html"><i class="fas fa-bullhorn"></i> <span>Pengumuman</span></a></li>
          </ul>
        </aside>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <section class="section">
          <div class="section-header">
            <h1>Kelola Donasi Kemalangan</h1>
            <div class="section-header-breadcrumb">
              <div class="breadcrumb-item active"><a href="#">Beranda</a></div>
              <div class="breadcrumb-item">Kelola Donasi Kemalangan</div>
            </div>
          </div>

          <div class="section-body">
            <!-- <h2 class="section-title">List Data Donasi Kemalangan</h2> -->
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h4>List Data Donasi Kemalangan</h4>
                    <div class="card-header-action">
                      <a href="form_kelola_donasi_kemalangan.html" class="btn btn-icon icon-left btn-primary"><i class="fas fa-plus"></i> Tambah Data</a>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-striped" id="datatable" width="100%">
                        <thead>                                 
                          <tr>
                            <th class="text-center">#</th>
                            <th>Judul</th>
                            <th>Banner</th>
                            <th>Deskripsi</th>
                            <th>Target Donasi (Rp)</th>
                            <th>Tanggal Dibuat</th>
                            <th>Tanggal Selesai</th>
                            <th width="10%">Aksi</th>
                          </tr>
                        </thead>
                        <tbody id="body-table">
                          
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </section>
      </div>
      <footer class="main-footer">
        <?php $tahun = ('Y'); ?>
        <div class="footer-left">
          Copyright &copy; <?php $tahun ?> <div class="bullet"></div> <a href="#">IKA PCR</a>
        </div>
        <div class="footer-right">
          
        </div>
      </footer>
    </div>
  </div>

  <!-- General JS Scripts -->
  <script src="assets/modules/jquery.min.js"></script>
  <script src="assets/modules/popper.js"></script>
  <script src="assets/modules/tooltip.js"></script>
  <script src="assets/modules/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/modules/nicescroll/jquery.nicescroll.min.js"></script>
  <script src="assets/modules/moment.min.js"></script>
  <script src="assets/js/stisla.js"></script>
  
  <!-- JS Libraies -->
  <script src="assets/modules/datatables/datatables.min.js"></script>
  <script src="assets/modules/datatables/DataTables-1.10.16/js/dataTables.bootstrap4.min.js"></script>
  <script src="assets/modules/datatables/Select-1.2.4/js/dataTables.select.min.js"></script>
  <script src="assets/modules/jquery-ui/jquery-ui.min.js"></script>
  <script src="assets/modules/sweetalert/sweetalert.min.js"></script>

  <!-- Page Specific JS File -->
  <script src="assets/js/page/modules-datatables.js"></script>
  <script src="assets/js/page/modules-sweetalert.js"></script>
  
  <!-- Template JS File -->
  <script src="assets/js/scripts.js"></script>
  <script src="assets/js/custom.js"></script>

<!-- <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script> -->
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-storage.js"></script>

  <script type="text/javascript" src="js/app.js"></script>

  <script type="text/javascript">
    // var database = firebase.database();
    // var starCountRef = firebase.database().ref('Donasi');
    // var allData = [{
    //     nomor:"1",
    //     judul:"testing",
    //     banner:'<img alt="image" src="https://firebasestorage.googleapis.com/v0/b/cheetah-erje.appspot.com/o/donasi%2F-MV4BMDugg7kaudXRiLH?alt=media&token=a4c36f38-d31a-4b25-a1ac-43459a45e789" width="100">',
    //     deskripsi:'kwkwkwk',
    //     target:"Rp. 17.000.000"
    //   },
    //   {
    //     nomor:"2",
    //     judul:"testing 2",
    //     banner:'<img alt="image" src="https://firebasestorage.googleapis.com/v0/b/cheetah-erje.appspot.com/o/donasi%2F-MV4BMDugg7kaudXRiLH?alt=media&token=a4c36f38-d31a-4b25-a1ac-43459a45e789" width="100">',
    //     deskripsi:'kwkwkwk',
    //     target:"Rp. 17.000.000"
    //   }];
    // starCountRef.once('value', function(snapshot) {
    //   if (snapshot.exists()) {
    //       var nomor = 0;
    //       snapshot.forEach( data => {
    //         nomor=nomor+1;
    //         allData.push({
    //           nomor:nomor,
    //           judul:data.val().judul,
    //           deskripsi:data.val().deskripsi,
    //           banner:'<img alt="image" src="'+data.val().foto+'" width="100">',
    //           target:'Rp. '+data.val().target
    //         });
    //       });
    //   }
    //   else {
    //     console.log("Data not available");
    //   }
    // });
    // console.log(allData);
    // $(function() {
    //   $('#datatable').DataTable({
    //       lengthMenu: [ [15, 45, 100, -1], [15, 45, 100, "All"] ],
    //       data:allData,
    //       columns: [
    //         {data: 'nomor', orderable: false, searchable: false},
    //         {data: 'judul', className: "text-left"},
    //         {data: 'banner', className: "text-left"},
    //         {data: 'deskripsi', className: "text-center"},
    //         // {data: 'status', name: 'status', className: "text-center"},
    //         // {data: 'date', name: 'date', className: "text-center"},
    //         // {data: 'aksi', name: 'aksi', className: "text-center", orderable: false, searchable: false},
    //       ]
    //   });
    // });

    var table = $('#datatable').DataTable();

    var rootRef = firebase.database().ref().child("Donasi");
    var nomor = 0;
    rootRef.on("child_added", snap => {
      var dataSet = [nomor=nomor+1,snap.child("judul").val(), '<img alt="image" src="'+snap.child("foto").val()+'" width="100">', snap.child("deskripsi").val().substring(0,100)+".....selengkapnya", snap.child("target").val(), snap.child("tanggal_mulai").val(),snap.child("tanggal_selesai").val(),'<a href="form_kelola_donasi_kemalangan.html?param='+snap.child("id").val()+'" title="Edit" class="btn btn-icon btn-sm btn-info"><i class="fas fa-pencil-alt"></i></a> <a href="konfirmasi_donatur.html?param='+snap.child("id").val()+'" title="Validasi Donasi" class="btn btn-icon btn-sm btn-info"><i class="fas fa-wallet"></i></a>' ];
      table.rows.add([dataSet]).draw();
    })
    
  </script>
</body>
</html>